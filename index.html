<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ERP System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;margin:0;display:flex;background:#f1f5f9}
.sidebar{width:220px;background:#0f172a;color:#fff;height:100vh;padding:15px}
.sidebar button{width:100%;margin:5px 0;padding:10px;border:none;background:#1e293b;color:#fff;cursor:pointer}
.main{flex:1;padding:20px}
.card{background:#fff;padding:15px;margin:10px 0;border-radius:10px}
input,button{padding:8px;margin:5px}
table{width:100%;border-collapse:collapse;background:#fff}
th,td{padding:10px;border-bottom:1px solid #ddd;text-align:left}
</style>
</head>

<body>

<div class="sidebar">
<h3>ERP</h3>
<button onclick="show('dashboard')">Dashboard</button>
<button onclick="show('inventory')">Inventory</button>
<button onclick="show('sales')">Sales</button>
<button onclick="show('purchase')">Purchase</button>
<button onclick="show('history')">History</button>
<button onclick="show('audit')">Audit Log</button>
</div>

<div class="main">

<div id="dashboard" class="card"></div>

<div id="inventory" class="card" style="display:none">
<h3>Add Product</h3>
<input id="pname" placeholder="Product name">
<input id="pqty" type="number" placeholder="Qty">
<button onclick="addProduct()">Add</button>

<h3>Stock</h3>
<table id="stockTable"></table>
</div>

<div id="sales" class="card" style="display:none">
<h3>Sales</h3>
<input id="sname" placeholder="Product name">
<input id="sqty" type="number" placeholder="Qty">
<button onclick="addSale()">Sell</button>
</div>

<div id="purchase" class="card" style="display:none">
<h3>Purchase</h3>
<input id="prname" placeholder="Product name">
<input id="prqty" type="number" placeholder="Qty">
<button onclick="addPurchase()">Purchase</button>
</div>

<div id="history" class="card" style="display:none">
<h3>Sales & Purchase History</h3>
<table id="historyTable"></table>
</div>

<div id="audit" class="card" style="display:none">
<h3>Audit Log</h3>
<ul id="auditLog"></ul>
</div>

</div>

<script>
let products=JSON.parse(localStorage.getItem("products"))||[]
let history=JSON.parse(localStorage.getItem("history"))||[]
let audit=JSON.parse(localStorage.getItem("audit"))||[]

function save(){
localStorage.setItem("products",JSON.stringify(products))
localStorage.setItem("history",JSON.stringify(history))
localStorage.setItem("audit",JSON.stringify(audit))
render()
}

function log(msg){
audit.push(msg+" ("+new Date().toLocaleString()+")")
}

function show(id){
document.querySelectorAll(".card").forEach(el=>el.style.display="none")
document.getElementById(id).style.display="block"
render()
}

function addProduct(){
let name=pname.value
let qty=+pqty.value
let p=products.find(x=>x.name==name)
if(p)p.qty+=qty
else products.push({name,qty})
log("Product Added: "+name)
save()
}

function addSale(){
let name=sname.value
let qty=+sqty.value
let p=products.find(x=>x.name==name)
if(p && p.qty>=qty){
p.qty-=qty
history.push({type:"Sale",name,qty})
log("Sale: "+name)
save()
}
}

function addPurchase(){
let name=prname.value
let qty=+prqty.value
let p=products.find(x=>x.name==name)
if(p)p.qty+=qty
else products.push({name,qty})
history.push({type:"Purchase",name,qty})
log("Purchase: "+name)
save()
}

function render(){

dashboard.innerHTML=`
<h3>Dashboard</h3>
Total Products: ${products.length}<br>
Total Transactions: ${history.length}
`

stockTable.innerHTML="<tr><th>Name</th><th>Qty</th></tr>"+
products.map(p=>`<tr><td>${p.name}</td><td>${p.qty}</td></tr>`).join("")

historyTable.innerHTML="<tr><th>Type</th><th>Name</th><th>Qty</th></tr>"+
history.map(h=>`<tr><td>${h.type}</td><td>${h.name}</td><td>${h.qty}</td></tr>`).join("")

auditLog.innerHTML=audit.map(a=>`<li>${a}</li>`).join("")
}

render()
</script>

</body>
</html>